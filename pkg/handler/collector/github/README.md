# GitHub Collector README

## Overview

The GitHub Collector is a component of the GUAC project designed to download metadata documents stored in GitHub releases or workflow artifacts.

## How It Works

The collector can operate in two modes:

1. **Release Mode**: Targets specific releases within a GitHub repository to collect assets matching predefined suffixes.
2. **Workflow Mode**: Targets artifacts generated by GitHub Actions workflows within a specific repository.

In both modes, the collector utilizes a GitHub client to interact with the GitHub API, fetching releases or workflow runs and their associated assets. The collected documents are stored in a blob store.

## Running the GitHub Collector

Note: For the collector to run, `guacIngest` along with a pubsub and a blob store are required.

### Prerequisites

- A valid GitHub token set in the environment variable [GITHUB_TOKEN](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens).

### Command Line Interface

The GitHub Collector is invoked through the guaccollect command-line interface. The specific subcommand for the GitHub collector is github.

#### Release Mode

```shell
guaccollect github --github-mode release [flags] <RELEASE_URL_1> <RELEASE_URL_2> ...
```

- `<RELEASE_URL_1>`, `<RELEASE_URL_2>`, ...: URLs of the GitHub releases to collect.

#### Workflow Mode

```shell
guaccollect github --github-mode=workflow --github-workflow-file=<WORKFLOW_FILE_NAME> [flags] <OWNER>/<REPO>
```

- `<WORKFLOW_FILE_NAME>`: Name of the workflow file to target for artifact collection.
- `<OWNER>/<REPO>`: GitHub repository in the format `owner/repo`.

### Flags

- `--github-mode`: Mode of operation (`release` or `workflow`). Default is `release`.
- `--github-sbom`: (Workflow mode) Name of the SBOM file to collect.
- `--github-workflow-file`: (Workflow mode) Name of the GitHub Actions workflow file.

## Configuration

The GitHub Collector can be further configured through environment variables and command-line flags to adjust polling intervals and more. For detailed configuration options, refer to the source code documentation and help output of the `guaccollect github` command.